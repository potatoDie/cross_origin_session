<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Session lab</title>
    <link rel="stylesheet" href="http://ppp.dev/house.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  </head>
  <body>
    <h1>0</h1>
    <p>Suppose this file resides on foo.com, and makes calls to a script
     count.php on another domain, bar.com.
     Cookies do not work in this cross-domain setting. The solution is to pass the session_id yourself.
    </p>
  	<button>More!</button>
    <script>
    	function increment(){
	    	$.ajax({
	    		url: 'http://ppp.dev/sandbox/cross_origin_session/count.php',
	    		dataType:'json',
	    		data:{PHPSESSID: localStorage.getItem('sid')},
	    		success: function(response, status, xhr) {
	    			localStorage.setItem('sid', response.sid);
	    			$('h1').html(response.count);
	    		}
	    	});
    	};
		
		$('button').on('click', increment );
    </script>
  </body>
</html>
